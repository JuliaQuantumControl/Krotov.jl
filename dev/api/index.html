<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · Krotov.jl</title><meta name="title" content="API · Krotov.jl"/><meta property="og:title" content="API · Krotov.jl"/><meta property="twitter:title" content="API · Krotov.jl"/><meta name="description" content="Documentation for Krotov.jl."/><meta property="og:description" content="Documentation for Krotov.jl."/><meta property="twitter:description" content="Documentation for Krotov.jl."/><meta property="og:url" content="https://juliaquantumcontrol.github.io/Krotov.jl/api/"/><meta property="twitter:url" content="https://juliaquantumcontrol.github.io/Krotov.jl/api/"/><link rel="canonical" href="https://juliaquantumcontrol.github.io/Krotov.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/><link href="https://juliaquantumcontrol.github.io/QuantumControl.jl/dev/assets/topbar/topbar.css" rel="stylesheet" type="text/css"/><script src="https://juliaquantumcontrol.github.io/QuantumControl.jl/dev/assets/topbar/topbar.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Krotov.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>API</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaQuantumControl/Krotov.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/master/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><ul><li><a href="#Krotov.KrotovResult"><code>Krotov.KrotovResult</code></a></li><li><a href="#Krotov.optimize_krotov-Tuple{Any}"><code>Krotov.optimize_krotov</code></a></li><li><a href="#Krotov.print_table-Tuple{Any, Any, Vararg{Any}}"><code>Krotov.print_table</code></a></li><li><a href="#QuantumControlBase.optimize-Tuple{Any, Val{:Krotov}}"><code>QuantumControlBase.optimize</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Krotov.KrotovResult" href="#Krotov.KrotovResult"><code>Krotov.KrotovResult</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Result object returned by <a href="#Krotov.optimize_krotov-Tuple{Any}"><code>optimize_krotov</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/2c691cbc773020630980fc64f3a6cfdc4468b91d/src/result.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Krotov.optimize_krotov-Tuple{Any}" href="#Krotov.optimize_krotov-Tuple{Any}"><code>Krotov.optimize_krotov</code></a> — <span class="docstring-category">Method</span></header><section><div><p>See <a href="#QuantumControlBase.optimize-Tuple{Any, Val{:Krotov}}"><code>optimize(problem; method=Krotov, kwargs...)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/2c691cbc773020630980fc64f3a6cfdc4468b91d/src/optimize.jl#L105-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Krotov.print_table-Tuple{Any, Any, Vararg{Any}}" href="#Krotov.print_table-Tuple{Any, Any, Vararg{Any}}"><code>Krotov.print_table</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Print optimization progress as a table.</p><p>This functions serves as the default <code>info_hook</code> for an optimization with Krotov&#39;s method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/2c691cbc773020630980fc64f3a6cfdc4468b91d/src/optimize.jl#L330-L335">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumControlBase.optimize-Tuple{Any, Val{:Krotov}}" href="#QuantumControlBase.optimize-Tuple{Any, Val{:Krotov}}"><code>QuantumControlBase.optimize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">using Krotov
result = optimize(problem; method=Krotov, kwargs...)</code></pre><p>optimizes the given control <a href="../externals/#QuantumControlBase.ControlProblem"><code>problem</code></a> using Krotov&#39;s method, returning a <a href="#Krotov.KrotovResult"><code>KrotovResult</code></a>.</p><p>Keyword arguments that control the optimization are taken from the keyword arguments used in the instantiation of <code>problem</code>; any of these can be overriden with explicit keyword arguments to <code>optimize</code>.</p><p><strong>Required problem keyword arguments</strong></p><ul><li><code>J_T</code>: A function <code>J_T(ϕ, trajectories)</code> that evaluates the final time functional from a list <code>ϕ</code> of forward-propagated states and <code>problem.trajectories</code>.</li></ul><p><strong>Recommended problem keyword arguments</strong></p><ul><li><code>lambda_a=1.0</code>: The inverse Krotov step width λ_a for every pulse.</li><li><code>update_shape=(t-&gt;1.0)</code>: A function <code>S(t)</code> for the &quot;update shape&quot; that scales the update for every pulse</li></ul><p>If different controls require different <code>lambda_a</code> or <code>update_shape</code>, a dict <code>pulse_options</code> must be given instead of a global <code>lambda_a</code> and <code>update_shape</code>, see below.</p><p><strong>Optional problem keyword arguments</strong></p><p>The following keyword arguments are supported (with default values):</p><ul><li><p><code>pulse_options</code>: A dictionary that maps every control (as obtained by <a href="../externals/#QuantumPropagators.Controls.get_controls-Tuple{ControlProblem}"><code>get_controls</code></a> from the <code>problem.trajectories</code>) to the following dict:</p><ul><li><code>:lambda_a</code>:  The value for inverse Krotov step width λₐ</li><li><code>:update_shape</code>: A function <code>S(t)</code> for the &quot;update shape&quot; that scales the Krotov pulse update.</li></ul><p>This overrides the global <code>lambda_a</code> and <code>update_shape</code> arguments.</p></li><li><p><code>chi</code>: A function <code>chi!(χ, ϕ, trajectories)</code> what receives a list <code>ϕ</code> of the forward propagated states and must set <span>$|χₖ⟩ = -∂J_T/∂⟨ϕₖ|$</span>. If not given, it will be automatically determined from <code>J_T</code> via <a href="../externals/#QuantumControlBase.make_chi-Tuple{Any, Any}"><code>make_chi</code></a> with the default parameters.</p></li><li><p><code>sigma=nothing</code>: Function that calculate the second-order contribution. If not given, the first-order Krotov method is used.</p></li><li><p><code>iter_start=0</code>: the initial iteration number</p></li><li><p><code>iter_stop=5000</code>: the maximum iteration number</p></li><li><p><code>prop_method</code>: The propagation method to use for each trajectory, see below.</p></li><li><p><code>update_hook</code>: A function that receives the Krotov workspace, the iteration number, the list of updated pulses and the list of guess pulses as positional arguments. The function may mutate any of its arguments. This may be used e.g. to apply a spectral filter to the updated pulses or to perform similar manipulations.</p></li><li><p><code>info_hook</code>: A function (or tuple of functions) that receives the same arguments as <code>update_hook</code>, in order to write information about the current iteration to the screen or to a file. The default <code>info_hook</code> prints a table with convergence information to the screen. Runs after <code>update_hook</code>. The <code>info_hook</code> function may return a tuple, which is stored in the list of <code>records</code> inside the <a href="#Krotov.KrotovResult"><code>KrotovResult</code></a> object.</p></li><li><p><code>check_convergence</code>: a function to check whether convergence has been reached. Receives a <a href="#Krotov.KrotovResult"><code>KrotovResult</code></a> object <code>result</code>, and should set <code>result.converged</code> to <code>true</code> and <code>result.message</code> to an appropriate string in case of convergence. Multiple convergence checks can be performed by chaining functions with <code>∘</code>. The convergence check is performed after any calls to <code>update_hook</code> and <code>info_hook</code>.</p></li><li><p><code>verbose=false</code>: If <code>true</code>, print information during initialization</p></li></ul><p><strong>Trajectory propagation</strong></p><p>Krotov&#39;s method involves the forward and backward propagation for every <a href="../externals/#QuantumControlBase.Trajectory"><code>Trajectory</code></a> in the <code>problem</code>. The keyword arguments for each propagation (see <a href="../externals/#QuantumPropagators.propagate-Tuple{Any, Any, Any}"><code>propagate</code></a>) are determined from any properties of each <a href="../externals/#QuantumControlBase.Trajectory"><code>Trajectory</code></a> that have a <code>prop_</code> prefix, cf. <a href="../externals/#QuantumControlBase.init_prop_trajectory-Tuple{Trajectory, Any}"><code>init_prop_trajectory</code></a>.</p><p>In situations where different parameters are required for the forward and backward propagation, instead of the <code>prop_</code> prefix, the <code>fw_prop_</code> and <code>bw_prop_</code> prefix can be used, respectively. These override any setting with the <code>prop_</code> prefix. This applies both to the properties of each <a href="../externals/#QuantumControlBase.Trajectory"><code>Trajectory</code></a> and the problem keyword arguments.</p><p>Note that the propagation method for each propagation must be specified. In most cases, it is sufficient (and recommended) to pass a global <code>prop_method</code> problem keyword argument.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaQuantumControl/Krotov.jl/blob/2c691cbc773020630980fc64f3a6cfdc4468b91d/src/optimize.jl#L12-L101">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><a class="docs-footer-nextpage" href="../references/">References »</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/JuliaQuantumControl/Krotov.jl">Krotov.jl</a> v0.5.5+dev docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Tuesday 23 January 2024 12:57">Tuesday 23 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
